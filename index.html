<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Interface</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/codebase/suite.css">
    <script type="text/javascript" src="/codebase/suite.js"></script>
    <script>
      $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip({
          placement : 'right'
        });
      });
      //for slider
      var timepicker = new dhx.Timepicker("timepicker_container", {
        css: "dhx_timepicker--bordered bg-grey"
      });
      timepicker.setValue([6,20,"AM"]);
    </script>
</head>
<body>
  </head>
  <body>
    <main>
        <h1>Climate Interface</h1>
        <img id="fplan" src="/images/fplan-actual.jpg" alt="floorplan" usemap="#flrplan">
        <map name="flrplan">
          <area shape="circle" coords="172,249,31" alt="sense1" onclick="testFun()">
          <area shape="circle" coords="215,357,31" alt="sense2" onclick="testFun()">
          <area shape="circle" coords="238,435,31" alt="sense3" onclick="testFun()">
          <area shape="circle" coords="144,511,31" alt="sense4" onclick="testFun()">
          <area shape="circle" coords="351,249,31" alt="sense5" onclick="testFun()">
          <area shape="circle" coords="784,347,31" alt="sense6" onclick="testFun()">
          <area shape="circle" coords="742,425,31" alt="sense7" onclick="testFun()">
        </map>
        <p>Select Floorplan Climate View:</p>
        <div id="climate-button">
          <label class="on"><input type="radio" name="toggle"><span>Show Overlay</span></label>
          <label class="off"><input type="radio" name="toggle"><span>No Overlay</span></label>
        </div>
        <p></p>
        <div id="info-box1">
          <p>Sensor Information:</p>
          <ul>
          <li id="co2">CO2: _______
          <div class="info">
            <a href="#"><span class="fa fa-info" data-toggle="tooltip" data-placement="right"
              data-original-title="This value shows the CO2 levels read by this sensor in parts per million."></span></a>
          </div></li>
          <li id="temp">Temperature: _______
          <div class="info">
            <a href="#"><span class="fa fa-info" data-toggle="tooltip" data-placement="right"
              data-original-title="This value shows the temperature levels read by this sensor in degrees Celcius."></span></a>
          </div></li>
          <li id="hum">Humidity: _______
          <div class="info">
            <a href="#"><span class="fa fa-info" data-toggle="tooltip" data-placement="right"
              data-original-title="This value shows the humidity levels read by this sensor in grams per Kg of air."></span></a>
          </div></li>
        </ul>
          <p>Click the button below to see an interpretation of your readings based on sensor information, user feedback,
            and outdoor weather conditions.</p>
          <button id="recs">See Recommendations</button>
          <div id="myModal" class="modal">
            <div class="modal-content">
              <span class="close">&times;</span>
              <p>You should replace the window sealant to better insulate the room, because blah blah blah</p>
            </div>
          </div>
        </div>
        <div id="info-box2">
          <p>User Feedback</p>
          <ul>
            <li> [user] feels <mark>cold</mark>.</li>
          </ul>
        <div id="weather"><a class="weatherwidget-io" href="https://forecast7.com/en/42d35n71d55/marlborough/" data-label_1="MARLBOROUGH" data-label_2="WEATHER" data-theme="dark" >MARLBOROUGH WEATHER</a>
          <script>
          !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
          </script>
        </div>
        <div id="timepicker_container"></div>
    </main>

    <script>
      //for slider
      var timepicker = new dhx.Timepicker("timepicker_container", {
        css: "dhx_timepicker--bordered bg-grey"
      });
      timepicker.setValue([6,20,"AM"]);

      //for popup on senosr
      function testFun() {
        alert("sensor 1 click");
        console.log("clicked");
      }

      //for json parse
      var dat;
      var str;
      fetch('test-data.json')
      .then(function(get) {
        return get.json();
      })
      .then(function(data) {
        dat = data;
        str = JSON.stringify(data);
        //document.getElementById('serial').innerHTML = str;
        return parseJSON(data);
      })
      .catch(function (err) {
        alert("there was an error fetching json data");
      });

      function parseJSON(data) {
        var timeslot = timepicker.getValue();
        console.log(timeslot);
        // var div = document.createElement('div');
        // var newElem = "";
        // for(var j = 0; j < data.bands.length; j++) {
        //   for(var i = 0; i < data.bands[j].setlist.length; i++) {
        //     newElem += '<b>' + data.bands[j].setlist[i].title+ '</b>' + '<br>' +
        //     "Artist: " + data.bands[j].name + '<br>' +
        //     "Genre: " + data.bands[j].genre + '<br>' +
        //     "Released " + data.bands[j].setlist[i].year + '<br>' + '<br>';
        //   }
        // }
        // div.innerHTML = newElem;
        // b.appendChild(div);
      }
    </script>

    <script src="index.js"></script>
  </body>
</html>
